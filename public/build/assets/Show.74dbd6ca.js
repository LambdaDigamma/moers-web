import{H as y}from"./Header.f9e7be0e.js";import{L as v}from"./LayoutGeneral.fed481bd.js";import{L as j}from"./LoadingButton.cf13d586.js";import{I}from"./Icon.f7a0e22a.js";import{j as c,o as i,g as d,i as e,y as r,l as h,w as L,G as q,q as P,z as x,F as V,A as B,n as g,p as b,m as u,t as m,x as C}from"./vendor.f0c292e1.js";import{_ as k}from"./plugin-vue_export-helper.21dcd24c.js";import{P as O}from"./PollResult.9990dd8e.js";import"./index.2ffd3439.js";import"./FlashMessages.2c37d88d.js";import"./MenuGeneralMobile.dc6a60a3.js";import"./vue-cookie-law.d1ee2f37.js";import"./chartjs-plugin-datalabels.esm.793cc7b9.js";const S={name:"PollVote",components:{Icon:I,LoadingButton:j},props:{poll:{type:Object,required:!0}},data(){return{selectionIndex:[],query:"",sending:!1}},methods:{vote(){const t={poll_id:this.poll.id,options:this.selectionIndex};this.sending=!0,this.$inertia.post(this.route("polls.vote",this.poll.id),t,{onSuccess:()=>{this.sending=!1}})},abstain(){this.$inertia.post()},clickedOption(t){if(this.poll.is_radio)this.selectionIndex=[],this.selectionIndex.push(t);else if(this.selectionIndex.includes(t)){const o=this.selectionIndex.indexOf(t);this.selectionIndex.splice(o,1)}else this.selectionIndex.length<this.poll.max_check&&this.selectionIndex.push(t)}},computed:{filteredOptions(){if(this.query==="")return this.poll.options;{let t=this.query.toLowerCase();return this.poll.options.filter(function(o){return o.name.toLowerCase().includes(t)})}}}},A={class:"mt-0"},D={class:"text-2xl font-semibold dark:text-white"},H={class:"text-base font-normal dark:text-white"},M={class:"mt-2"},G={class:"flex items-stretch w-full my-3"},N={class:"flex items-center pl-1 rounded-l dark:bg-gray-800"},E={class:""},F=["onClick"],T={class:"px-2 py-2 dark:text-white"},z={key:0,class:"flex items-center justify-center w-24 dark:bg-green-700"},K=e("span",{class:"font-medium dark:text-white"},"Ausgew\xE4hlt",-1),R=[K],U={class:"mt-2 ml-1 dark:text-gray-600"},W=m(" Abstimmen "),Z=m(" Ich m\xF6chte mich enthalten. ");function J(t,o,s,w,n,a){const p=c("icon"),_=c("LoadingButton"),f=c("inertia-link");return i(),d("div",null,[e("div",A,[e("h1",D,r(s.poll.question),1),e("p",H,r(s.poll.description),1)]),e("form",{onSubmit:o[2]||(o[2]=x((...l)=>a.vote&&a.vote(...l),["prevent"]))},[e("div",M,[e("div",G,[e("div",N,[h(p,{name:"search",class:"w-4 h-4 m-2 dark:fill-white"})]),L(e("input",{onKeydown:o[0]||(o[0]=P(x(()=>{},["prevent"]),["enter"])),"onUpdate:modelValue":o[1]||(o[1]=l=>n.query=l),placeholder:"Suchen\u2026",type:"text",class:"w-full px-2 py-2 rounded-r md:px-2 md:py-3 focus:ring dark:text-white dark:bg-gray-600"},null,544),[[q,n.query]])]),e("div",E,[(i(!0),d(V,null,B(a.filteredOptions,l=>(i(),d("div",{class:g(["flex justify-between mt-1 border-4 border-transparent rounded dark:bg-gray-600",{"border-green-700":n.selectionIndex.includes(l.id)}]),key:l.id,onClick:ae=>a.clickedOption(l.id)},[e("span",T,r(l.name),1),n.selectionIndex.includes(l.id)?(i(),d("div",z,R)):b("",!0)],10,F))),128))]),e("p",U,[e("em",null,r(n.selectionIndex.length)+"/"+r(s.poll.max_check)+" Antworten ausgew\xE4hlt",1)])]),h(_,{disabled:n.selectionIndex.length!==s.poll.max_check,loading:n.sending,type:"submit",onSubmit:x(a.vote,["prevent"]),class:g(["px-3 py-2 font-semibold rounded-lg dark:text-white dark:bg-green-700",{"dark-hover:bg-green-800":n.selectionIndex.length===s.poll.max_check}])},{default:u(()=>[W]),_:1},8,["disabled","loading","onSubmit","class"])],32),h(f,{href:t.route("polls.abstain",this.poll.id),method:"post",class:"block mt-3 dark:text-white"},{default:u(()=>[Z]),_:1},8,["href"])])}var Q=k(S,[["render",J]]);const X={name:"Show",components:{PollResult:O,PollVote:Q,Header:y},layout:v,props:{poll:Object,nextPoll:Object},created(){this.$root.$emit("newTitle","Details")}},Y={class:"lg:w-1/2"},$=m(" Details "),ee={key:0,class:"flex flex-row my-3"},te=m(" Zur n\xE4chsten Abstimmung "),se={class:"p-3 mb-6 rounded-lg shadow-lg dark:bg-gray-700"},oe={key:1},ne={class:"text-xl font-bold md:text-3xl dark:text-white"},le={class:"text-base dark:text-white"},ie=e("h2",{class:"mt-3 mb-0 text-lg font-semibold dark:text-white"}," Ergebnisse: ",-1),de=e("p",{class:"mt-2 font-medium dark:text-white"}," Die Ergebnisse werden auf Wunsch bis auf weiteres versteckt gehalten. ",-1);function re(t,o,s,w,n,a){const p=c("Header"),_=c("inertia-link"),f=c("PollVote");return i(),d("div",Y,[h(p,{href:t.route("polls.index"),"previous-title":"Abstimmungen"},{default:u(()=>[$]),_:1},8,["href"]),s.nextPoll&&s.poll.results!==null?(i(),d("div",ee,[h(_,{href:t.route("polls.show",s.nextPoll.id),class:"block px-3 py-2 text-base font-semibold rounded-lg dark:bg-yellow-500 dark:text-black"},{default:u(()=>[te]),_:1},8,["href"])])):b("",!0),e("div",se,[s.poll.results===null?(i(),C(f,{key:0,poll:s.poll},null,8,["poll"])):(i(),d("div",oe,[e("h1",ne,r(s.poll.question),1),e("p",le,r(s.poll.description),1),ie,de]))])])}var ye=k(X,[["render",re]]);export{ye as default};
