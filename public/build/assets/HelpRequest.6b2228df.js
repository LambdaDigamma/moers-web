import{L as b}from"./LayoutGeneral.35c0ba58.js";import{o as r,g as o,i as e,F as v,A as y,n as c,y as i,w,B as q,q as k,j as _,p as a,l as u,m as h,x as H,t as l}from"./vendor.74392d08.js";import{_ as f}from"./plugin-vue_export-helper.21dcd24c.js";import"./index.9bbd4c90.js";import"./FlashMessages.fac0df4b.js";import"./MenuGeneralMobile.5e3b0981.js";import"./Icon.c475cdc5.js";const M={name:"ChatBox",props:{conversation:Object,messages:Array},methods:{sendMessage(){this.$emit("send",this.form.message),this.form.message=null}},data(){return{form:{message:null}}},mounted(){Echo.private("conversation."+this.conversation.id).listen(".message.posted",s=>{this.messages.push(s.message),axios.post(this.route("conversations.readMessage",this.conversation.id)).then(d=>{console.log(d.data)})})},updated(){var s=this.$el.querySelector("#scroll-container");s.scrollTop=s.scrollHeight}},z={class:"flex flex-col h-64 bg-gray-100"},C={class:"px-4 py-5 overflow-y-auto sm:p-6","scroll-region":"",id:"scroll-container"},j={class:"flex w-full px-4 py-2 bg-white rounded-lg shadow sm:p-6 md:py-3"},B=e("label",{for:"message_input",class:"sr-only"}," Nachricht eingeben ",-1),S={class:"relative w-full text-gray-400 focus-within:text-gray-600"},D=e("button",{class:"absolute inset-y-0 left-0 flex items-center pointer-events-none"},[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z","clip-rule":"evenodd"})])],-1);function N(s,d,t,x,g,m){return r(),o("div",null,[e("div",z,[e("div",C,[(r(!0),o(v,null,y(t.messages,n=>(r(),o("div",{key:n.id,class:c(["flex flex-row mb-3",{"justify-end":n.sender_id===s.$page.props.auth.user.id}])},[e("div",{class:c(["w-1/2 px-3 py-2 text-sm rounded-md",[n.sender_id===s.$page.props.auth.user.id?"bg-blue-200":"bg-red-200"]])},[e("p",null,i(n.content),1),e("small",{class:c(["text-xs font-medium",[n.sender_id===s.$page.props.auth.user.id?"text-blue-500":"text-red-500"]])},i(n.created_at|s.moment("[um] hh:mm [am] DD.MM.")),3)],2)],2))),128))])]),e("div",j,[B,e("div",S,[D,w(e("input",{id:"message_input",onKeydown:d[0]||(d[0]=k((...n)=>m.sendMessage&&m.sendMessage(...n),["enter"])),"onUpdate:modelValue":d[1]||(d[1]=n=>g.form.message=n),class:"block w-full h-full py-2 pl-8 pr-3 text-gray-900 placeholder-gray-500 rounded-md focus:outline-none focus:placeholder-gray-400 sm:text-sm",placeholder:"Nachricht eingeben"},null,544),[[q,g.form.message]])]),e("button",{type:"button",onClick:d[2]||(d[2]=(...n)=>m.sendMessage&&m.sendMessage(...n)),class:"inline-flex items-center px-3 py-2 text-sm font-medium leading-4 text-blue-700 transition duration-150 ease-in-out bg-blue-100 border border-transparent rounded-md hover:bg-blue-50 focus:outline-none focus:border-blue-300 focus:ring-blue active:bg-blue-200"}," Senden ")])])}var V=f(M,[["render",N]]);const K={name:"HelpRequest",components:{ChatBox:V},layout:b,props:{request:Object,isCreator:Boolean,isHelper:Boolean,messages:Array},methods:{sendMessage(s){this.$inertia.post(this.route("help.request.sendMessage",this.request.id),{content:s},{replace:!1,preserveState:!0,preserveScroll:!0,only:["messages"]})}},mounted(){Echo.private("conversation."+this.request.conversation.id).listen(".user.joined",s=>{this.$inertia.reload(this.route("help.request.show",this.request.id),{replace:!1,preserveState:!0,preserveScroll:!0,only:["messages"]})})}},A={class:"pb-48"},E={class:"overflow-hidden bg-white rounded-lg shadow"},L={class:"px-4 py-5 border-b border-gray-200 sm:px-6"},T={class:"text-lg font-medium leading-6 text-gray-900"},F=l(" Kontakt "),W={key:0},I=l(" zu "),O={key:0},P={key:1},G=e("p",{class:"max-w-2xl mt-1 text-sm leading-5 text-gray-500"}," Nehmt Kontakt auf und tauscht eure Kontaktdaten aus. ",-1),R={key:0,class:"px-4 py-5 sm:p-6"},U={id:"start-contact-container"},Z=l(" Nimm Kontakt auf "),J=e("p",{class:"max-w-xl mt-2 text-sm leading-5 text-gray-500"}," Wenn du den Kontakt aufnimmst, kann der Hilfesuchende deinen Namen sehen und dir schreiben. Danach wird diese Hilfesuche nicht mehr \xF6ffentlich angezeigt und ihr beide befindet euch in einem privaten Raum. ",-1),Q={key:2,class:"px-4 py-5 sm:p-6"},X=e("p",{class:"max-w-xl text-sm leading-5 text-gray-500"}," Warte bis jemand dich kontaktiert. ",-1),Y=[X],$={key:0,class:"flex flex-row items-center mt-2 ml-2 text-sm text-gray-400"},ee=e("svg",{viewBox:"0 0 20 20",fill:"currentColor",class:"w-6 h-6"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),te=e("p",{class:"ml-2 sm:ml-1"},[l(" Lade die Seite neu, falls es beim Chat gibt. Bei Fragen melde dich "),e("a",{href:"mailto:info@lambdadigamma.com",class:"text-gray-600"},"hier.")],-1),se=[ee,te],ne={class:"mt-6 overflow-hidden bg-white rounded-lg shadow"},re=e("div",{class:"px-4 py-5 border-b border-gray-200 sm:px-6"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Informationen zur Hilfesuche "),e("p",{class:"max-w-2xl mt-1 text-sm leading-5 text-gray-500"}," Details und weitere Informationen zur Hilfesuche. Biete hier deine Hilfe an. ")],-1),oe={class:"px-4 py-5 sm:p-0"},de={key:0,class:"sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6 sm:py-5"},ie=e("dt",{class:"text-sm font-medium leading-5 text-gray-500"}," Hilfesuchende/r ",-1),ae={class:"mt-1 text-sm leading-5 text-gray-900 sm:mt-0 sm:col-span-2"},le=e("dt",{class:"text-sm font-medium leading-5 text-gray-500"}," Stadtteil ",-1),me={class:"mt-1 text-sm leading-5 text-gray-900 sm:mt-0 sm:col-span-2"},ce={class:"mt-8 sm:mt-0 sm:grid sm:grid-cols-3 sm:gap-4 sm:border-t sm:border-gray-200 sm:px-6 sm:py-5"},ue=e("dt",{class:"text-sm font-medium leading-5 text-gray-500"}," Postleitzahl ",-1),he={class:"mt-1 text-sm leading-5 text-gray-900 sm:mt-0 sm:col-span-2"},ge={class:"mt-8 sm:mt-0 sm:grid sm:grid-cols-3 sm:gap-4 sm:border-t sm:border-gray-200 sm:px-6 sm:py-5"},_e=e("dt",{class:"text-sm font-medium leading-5 text-gray-500"}," Eingestellt am ",-1),fe={class:"mt-1 text-sm leading-5 text-gray-900 sm:mt-0 sm:col-span-2"},xe={class:"mt-8 sm:mt-0 sm:grid sm:grid-cols-3 sm:gap-4 sm:border-t sm:border-gray-200 sm:px-6 sm:py-5"},pe=e("dt",{class:"text-sm font-medium leading-5 text-gray-500"}," Beschreibung der Hilfesuche ",-1),be={class:"mt-1 text-sm leading-5 text-gray-900 sm:mt-0 sm:col-span-2"},ve={key:1,class:"mt-6 overflow-hidden bg-white shadow sm:rounded-lg"},ye=e("div",{class:"px-4 py-5 border-b border-gray-200 sm:px-6"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Aktionen "),e("p",{class:"max-w-2xl mt-1 text-sm leading-5 text-gray-500"}," F\xFChre Aktionen f\xFCr diese Hilfeleistung durch. ")],-1),we={class:"px-4 py-5 sm:p-6"},qe={key:0},ke=l(" Ich habe einen Helfer gefunden "),He=e("p",{class:"max-w-xl mt-2 text-sm leading-5 text-gray-500"}," Wenn jemand dir geholfen hat, kannst du hier die Hilfesuche schlie\xDFen. Dabei werden alle Informationen komplett gel\xF6scht und der Helfende wird dar\xFCber informiert. ",-1),Me=l(" Ziehe die Hilfesuche zur\xFCck "),ze=e("p",{class:"max-w-xl mt-2 text-sm leading-5 text-gray-500"}," Wenn du diese Hilfesuche zur\xFCck ziehst, wird der Helfer gegebenenfalls dar\xFCber informiert und alle Daten werden gel\xF6scht. ",-1),Ce={key:2,class:"mt-6 overflow-hidden bg-white shadow sm:rounded-lg"},je=e("div",{class:"px-4 py-5 border-b border-gray-200 sm:px-6"},[e("h3",{class:"text-lg font-medium leading-6 text-gray-900"}," Aktionen "),e("p",{class:"max-w-2xl mt-1 text-sm leading-5 text-gray-500"}," F\xFChre Aktionen f\xFCr diese Hilfeleistung durch. ")],-1),Be={class:"px-4 py-5 sm:p-6"},Se={key:0},De=l(" Wieder austreten "),Ne=e("p",{class:"max-w-xl mt-2 text-sm leading-5 text-gray-500"}," Wenn du austrittst, wird die Hilfesuche wieder jedem angezeigt und kann von jemand anderem ausgef\xFChrt werden. Die Konversation und alle verbundenen Nachrichten werden vollst\xE4ndig gel\xF6scht. ",-1);function Ve(s,d,t,x,g,m){const n=_("inertia-link"),p=_("ChatBox");return r(),o("div",A,[e("div",E,[e("div",L,[e("h3",T,[F,t.request.helper?(r(),o("span",W,[I,t.isCreator?(r(),o("span",O,i(t.request.helper.first_name),1)):(r(),o("span",P,i(t.request.creator.first_name),1))])):a("",!0)]),G]),!t.isCreator&&t.request.served_on===null?(r(),o("div",R,[e("div",U,[u(n,{href:s.route("help.request.accept",t.request.id),method:"PUT",class:"inline-flex items-center px-4 py-2 text-sm font-medium leading-5 text-blue-700 transition duration-150 ease-in-out bg-blue-100 border border-transparent rounded-md hover:bg-blue-50 focus:outline-none focus:border-blue-300 focus:ring-blue active:bg-blue-200"},{default:h(()=>[Z]),_:1},8,["href"]),J])])):t.request.served_on!==null?(r(),H(p,{key:1,conversation:t.request.conversation,messages:t.messages,onSend:m.sendMessage},null,8,["conversation","messages","onSend"])):(r(),o("div",Q,Y))]),t.request.served_on!==null?(r(),o("div",$,se)):a("",!0),e("div",ne,[re,e("div",oe,[e("dl",null,[t.request.creator?(r(),o("div",de,[ie,e("dd",ae,i(t.request.creator.first_name),1)])):a("",!0),e("div",{class:c(["sm:mt-0 sm:grid sm:grid-cols-3 sm:gap-4 sm:border-t sm:border-gray-200 sm:px-6 sm:py-5",{"mt-8":t.request.creator}])},[le,e("dd",me,i(t.request.quarter.name),1)],2),e("div",ce,[ue,e("dd",he,i(t.request.quarter.postcode),1)]),e("div",ge,[_e,e("dd",fe,i(t.request.created_at|s.moment("dddd, Do MMM [um] HH:mm")),1)]),e("div",xe,[pe,e("dd",be,i(t.request.request),1)])])])]),t.isCreator?(r(),o("div",ve,[ye,e("div",we,[t.request.served_on!==null?(r(),o("div",qe,[u(n,{href:s.route("help.request.done",t.request.id),method:"POST",class:"inline-flex items-center px-4 py-2 text-sm font-medium leading-5 text-green-700 transition duration-150 ease-in-out bg-green-100 border border-transparent rounded-md hover:bg-green-50 focus:outline-none focus:border-green-300 focus:ring-green active:bg-green-200"},{default:h(()=>[ke]),_:1},8,["href"]),He])):a("",!0),e("div",{class:c({"mt-6":t.request.served_on!==null})},[u(n,{href:s.route("help.request.delete",t.request.id),method:"DELETE",class:"inline-flex items-center px-4 py-2 text-sm font-medium leading-5 text-red-700 transition duration-150 ease-in-out bg-red-100 border border-transparent rounded-md hover:bg-red-50 focus:outline-none focus:border-red-300 focus:ring-red active:bg-red-200"},{default:h(()=>[Me]),_:1},8,["href"]),ze],2)])])):a("",!0),t.isHelper?(r(),o("div",Ce,[je,e("div",Be,[t.request.served_on!==null?(r(),o("div",Se,[u(n,{href:s.route("help.request.quit",t.request.id),method:"POST",class:"inline-flex items-center px-4 py-2 text-sm font-medium leading-5 text-red-700 transition duration-150 ease-in-out bg-red-100 border border-transparent rounded-md hover:bg-red-50 focus:outline-none focus:border-red-300 focus:ring-red active:bg-red-200"},{default:h(()=>[De]),_:1},8,["href"]),Ne])):a("",!0)])])):a("",!0)])}var Ie=f(K,[["render",Ve]]);export{Ie as default};
