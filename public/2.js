(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{22:function(t,e,n){var s=n(56);"string"==typeof s&&(s=[[t.i,s,""]]);var l={hmr:!0,transform:void 0,insertInto:void 0};n(18)(s,l);s.locals&&(t.exports=s.locals)},55:function(t,e,n){"use strict";var s=n(22);n.n(s).a},56:function(t,e,n){(t.exports=n(17)(!1)).push([t.i,"\n.list-group-item.active[data-v-20a9710d] {\n    background-color: #00ff008e;\n    border-color: inherit;\n    color: black;\n}\n.list-group-item[data-v-20a9710d]:hover {\n    background-color: lightgray;\n    cursor: pointer;\n}\n\n",""])},59:function(t,e,n){"use strict";n.r(e);var s=n(7),l=n(0),o={name:"PollVote",props:{poll:{type:Object,required:!0}},data:function(){return{selectionIndex:[],test:{}}},methods:{clickedOption:function(t){if(this.poll.is_radio)this.selectionIndex=[],this.selectionIndex.push(t);else if(this.selectionIndex.includes(t)){var e=this.selectionIndex.indexOf(t);this.selectionIndex.splice(e,1)}else this.selectionIndex.length<this.poll.max_check&&this.selectionIndex.push(t)},vote:function(){var t={poll_id:this.poll.id,options:this.selectionIndex};this.$store.dispatch(l.y,t)},abstain:function(){this.$store.dispatch(l.a,this.poll.id)}}},a=(n(55),n(1)),r=Object(a.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"mt-4"},[n("h4",[t._v(t._s(t.poll.question))]),t._v(" "),n("p",[t._v(t._s(t.poll.description))])]),t._v(" "),n("div",[n("b-list-group",t._l(t.poll.options,function(e){return n("b-list-group-item",{key:e.id,on:{click:function(n){return t.clickedOption(e.id)}}},[t.selectionIndex.includes(e.id)?n("b-badge",{attrs:{variant:"success"}},[t._v("Ausgewählt")]):t._e(),t._v("\n                "+t._s(e.name)+"\n            ")],1)}),1),t._v(" "),n("p",{staticClass:"text-muted mt-2 ml-2"},[n("em",[t._v(t._s(t.selectionIndex.length)+"/"+t._s(t.poll.max_check)+" Antworten ausgewählt")])])],1),t._v(" "),n("b-button",{attrs:{disabled:!(t.selectionIndex.length===t.poll.max_check),block:"",variant:"success",size:"lg"},on:{click:t.vote}},[t._v("Abstimmen")]),t._v(" "),n("div",{staticClass:"mt-2"},[n("b-link",{on:{click:function(e){return e.preventDefault(),t.abstain(e)}}},[t._v("Ich möchte mich enthalten.")])],1)],1)},[],!1,null,"20a9710d",null).exports,i=n(5),c=n(27),u=n.n(c),p=n(31),d=n.n(p),h={name:"PollChart",props:{chartData:{type:Array,required:!0},chartLabels:{type:Array,required:!0}},data:function(){return{pollData:{type:"pie",data:{labels:this.chartLabels,datasets:[{data:this.chartData,backgroundColor:["blue","red","green","purple","orange","yellow","teal"]}]},options:{responsive:!0,legend:{display:!0,position:"bottom",labels:{fontColor:"#333"}},tooltips:{enabled:!1},plugins:{datalabels:{formatter:function(t,e){var n=0;return e.chart.data.datasets[0].data.map(function(t){n+=t}),(100*t/n).toFixed(2)+"%"},color:"#fff"}}}}}},methods:{createChart:function(t,e){var n=document.getElementById(t);new u.a(n,{plugins:[d.a],type:e.type,data:e.data,options:e.options})}},mounted:function(){this.createChart("poll-chart",this.pollData)}},m={name:"PollResult",components:{PollChart:Object(a.a)(h,function(){var t=this.$createElement;this._self._c;return this._m(0)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("canvas",{attrs:{id:"poll-chart"}})])}],!1,null,"097d72e8",null).exports},props:{poll:{type:Object,required:!0}},data:function(){return{chartData:this.poll.results.votes.map(function(t){return t.votes}),chartLabels:this.poll.results.votes.map(function(t){return t.name})}}};function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,s)}return n}function v(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={name:"Poll",components:{PollVote:r,PollResult:Object(a.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",[n("div",{staticClass:"mb-5"},[n("h4",[t._v(t._s(t.poll.question))]),t._v(" "),n("p",{staticClass:"text-justify"},[t._v(t._s(t.poll.description))])]),t._v(" "),n("PollChart",{attrs:{chartData:t.chartData,chartLabels:t.chartLabels}}),t._v(" "),n("b-list-group",{staticClass:"mt-3"},[n("b-list-group-item",{staticClass:"d-flex align-items-center"},[1===t.poll.results.total?n("p",{staticClass:"m-0 font-weight-bold"},[t._v("\n                Eine Person hat schon abgestimmt.\n            ")]):n("p",{staticClass:"m-0 font-weight-bold"},[t._v("\n                "+t._s(t.poll.results.total)+" Personen haben schon abgestimmt.\n            ")])]),t._v(" "),t._l(t.poll.results.votes,function(e,s){return n("b-list-group-item",{key:s},[n("div",{staticClass:"d-flex flex-sm-row flex-column justify-content-start"},[n("b-badge",{staticClass:"mt-2 mt-sm-0",attrs:{variant:"secondary"}},[t._v("Stimmen: "+t._s(e.votes))]),t._v(" "),n("div",{staticClass:"text-center text-sm-left text-justify ml-sm-2 mt-2 mt-sm-0"},[t._v(t._s(e.name))])],1)])})],2)],1)},[],!1,null,"7e9b959b",null).exports},props:{id:{type:Number,required:!0}},beforeRouteEnter:function(t,e,n){Promise.all([s.b.dispatch(l.p,t.params.id)]).then(function(){n()})},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(n,!0).forEach(function(e){v(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},Object(i.b)(["currentUser","isAuthenticated","isLoadingPoll","poll"]))},_=Object(a.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",{staticClass:"my-4",attrs:{"bg-variant":"secondary","text-variant":"black"}},[n("h3",{staticClass:"m-0"},[t._v("Abstimmung")])]),t._v(" "),t.isLoadingPoll?n("div",{staticClass:"d-flex justify-content-center m-5"},[n("b-spinner",{attrs:{label:"Lädt..."}})],1):t._e(),t._v(" "),t.poll?n("div",[null===t.poll.results?n("PollVote",{attrs:{poll:t.poll}}):n("PollResult",{attrs:{poll:t.poll}})],1):t._e()],1)},[],!1,null,null,null);e.default=_.exports}}]);