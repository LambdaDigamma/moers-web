(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{11:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,r,o;return t=e,(r=[{key:"has",value:function(e){return this.errors.hasOwnProperty(e)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"get",value:function(e){if(this.errors[e])return this.errors[e][0]}},{key:"record",value:function(e){this.errors=e}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e?delete this.errors[e]:this.errors={}}}])&&n(t.prototype,r),o&&n(t,o),e}();function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.update(t),this.shouldReset=!1}var t,r,n;return t=e,(r=[{key:"update",value:function(e){for(var t in this.originalData=e,e)this[t]=e[t];this.errors=new o}},{key:"data",value:function(){var e={};for(var t in this.originalData)e[t]=this[t];return e}},{key:"reset",value:function(){for(var e in this.originalData)this[e]="";this.errors.clear()}},{key:"submit",value:function(e){var t=this;e.then(function(e){t.onSuccess(e)}).catch(function(e){t.onFail(e)})}},{key:"onSuccess",value:function(e){this.shouldReset&&this.reset()}},{key:"onFail",value:function(e){this.errors.record(e)}}])&&a(t.prototype,r),n&&a(t,n),e}();t.a=i},78:function(e,t,r){"use strict";r.r(t);var n=r(7),o=r(4),a=r(11),i=r(0),s=r(3);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={name:"Group",props:{id:{type:Number,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},Object(o.b)(["group","users","organisations"]),{organisationOptions:function(){return[{text:"Keine Organisation",value:null}].concat(this.organisations.map(function(e){return{text:e.name,value:e.id}}))},userOptions:function(){var e=this;return[{text:"Benutzer auswählen",value:null,disabled:!0}].concat(this.users.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}).map(function(t){return{text:t.name,value:t.id,disabled:e.group.users.map(function(e){return e.id}).includes(t.id)}}))}}),methods:{formChanged:function(e){this.changed=!0,e.target&&this.form.errors.clear(e.target.name)},updateGroup:function(){var e=this,t=this.form.data();t.group_id=this.id;var r=this.$store.dispatch(i.f,t);r.then(function(t){e.form.update(t)}),this.form.submit(r)},addGroupUser:function(){n.b.dispatch(i.d,{user_id:this.selectedUser,group_id:this.id}),this.selectedUser=null},removeUserGroup:function(e){n.b.dispatch(i.e,{user_id:e,group_id:this.id})}},data:function(){return{form:new a.a({}),changed:!1,selectedUser:null}},mounted:function(){var e=this;n.b.dispatch(i.b,this.id),n.b.dispatch(i.o),n.b.dispatch(i.k),n.b.subscribe(function(t){t.type===s.a&&(e.changed=!1,e.form.update(t.payload))})}},d=r(1),f=Object(d.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mt-0 mt-sm-1 mt-md-2"},[r("can",{attrs:{I:"read-group",a:"Group"}},[r("b-card",{attrs:{"bg-variant":"secondary","text-variant":"black"}},[r("div",{staticClass:"d-flex justify-content-between"},[r("h3",{staticClass:"m-0"},[e._v("Gruppe")])])]),e._v(" "),e.group!=={}?r("b-card",{staticClass:"mt-5"},[r("h4",[e._v("Allgemeine Informationen")]),e._v(" "),r("b-form",{on:{keydown:e.formChanged}},[r("b-form-group",{attrs:{id:"input-group-name",label:"Name:","label-for":"name"}},[r("b-form-input",{attrs:{id:"name",required:"",placeholder:"Namen eingeben"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{"force-show":e.form.errors.has("name")},domProps:{textContent:e._s(e.form.errors.get("name"))}})],1),e._v(" "),r("b-form-group",{attrs:{id:"input-group-description",label:"Beschreibung:","label-for":"description"}},[r("b-form-textarea",{attrs:{id:"description",rows:"3",placeholder:"Beschreibung eingeben"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{"force-show":e.form.errors.has("description")},domProps:{textContent:e._s(e.form.errors.get("description"))}})],1),e._v(" "),r("b-form-group",{attrs:{id:"input-group-organisation",label:"Organisation:","label-for":"organisation"}},[e.organisations?r("b-form-select",{attrs:{id:"organisation",options:e.organisationOptions},on:{input:e.formChanged},model:{value:e.form.organisation_id,callback:function(t){e.$set(e.form,"organisation_id",t)},expression:"form.organisation_id"}}):e._e(),e._v(" "),r("b-form-invalid-feedback",{attrs:{"force-show":e.form.errors.has("description")},domProps:{textContent:e._s(e.form.errors.get("description"))}})],1),e._v(" "),r("b-alert",{staticClass:"mt-2 mb-4",attrs:{show:e.form.errors.has("common"),variant:"danger"},domProps:{textContent:e._s(e.form.errors.get("common"))}}),e._v(" "),r("div",{staticClass:"d-flex justify-content-end"},[r("b-button",{attrs:{disabled:!e.changed||e.form.errors.any(),type:"submit",variant:"primary"},on:{click:function(t){return t.preventDefault(),e.updateGroup(t)}}},[e._v("Speichern")])],1)],1),e._v(" "),r("div",{staticClass:"mt-3"},[r("h4",[e._v("Benutzer")]),e._v(" "),e._l(e.group.users,function(t){return r("b-card",{key:t.id,staticClass:"mt-2"},[r("b-row",[r("b-col",{attrs:{sm:"12",md:"8"}},[r("h4",[e._v(e._s(t.name))])]),e._v(" "),r("b-col",{staticClass:"d-flex justify-content-end align-items-end",attrs:{sm:"12",md:"4"}},[r("b-button",{attrs:{variant:"danger"},on:{click:function(r){return r.preventDefault(),e.removeUserGroup(t.id)}}},[e._v("Benutzer entfernen")])],1)],1)],1)}),e._v(" "),r("div",{staticClass:"mt-3"},[r("div",[e._v("\n                        Benutzer hinzufügen:\n                    ")]),e._v(" "),r("b-row",{staticClass:"mt-1"},[r("b-col",{staticClass:"mt-1 mt-md-0",attrs:{cols:"12",md:"10"}},[e.users?r("b-form-select",{attrs:{options:e.userOptions},model:{value:e.selectedUser,callback:function(t){e.selectedUser=t},expression:"selectedUser"}}):e._e()],1),e._v(" "),r("b-col",{staticClass:"mt-1 mt-md-0",attrs:{cols:"12",md:"2"}},[r("b-button",{attrs:{block:"",disabled:!e.selectedUser},on:{click:function(t){return t.preventDefault(),e.addGroupUser(t)}}},[e._v("Hinzufügen")])],1)],1)],1)],2)],1):e._e()],1)],1)},[],!1,null,"40dd89f1",null);t.default=f.exports}}]);