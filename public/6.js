(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{16:function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.errors={}}var t,r,o;return t=e,(r=[{key:"has",value:function(e){return this.errors.hasOwnProperty(e)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"get",value:function(e){if(this.errors[e])return this.errors[e][0]}},{key:"record",value:function(e){this.errors=e}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;e?delete this.errors[e]:this.errors={}}}])&&n(t.prototype,r),o&&n(t,o),e}();function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.update(t),this.shouldReset=!1}var t,r,n;return t=e,(r=[{key:"update",value:function(e){for(var t in this.originalData=e,e)this[t]=e[t];this.errors=new o}},{key:"data",value:function(){var e={};for(var t in this.originalData)e[t]=this[t];return e}},{key:"reset",value:function(){for(var e in this.originalData)this[e]="";this.errors.clear()}},{key:"submit",value:function(e){var t=this;e.then(function(e){t.onSuccess(e)}).catch(function(e){t.onFail(e)})}},{key:"onSuccess",value:function(e){this.shouldReset&&this.reset()}},{key:"onFail",value:function(e){this.errors.record(e)}}])&&a(t.prototype,r),n&&a(t,n),e}();t.a=i},75:function(e,t,r){"use strict";r.r(t);var n=r(7),o=r(0),a=r(5),i=r(16),s=r(3);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l={name:"User",props:{id:{type:Number,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(r,!0).forEach(function(t){c(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},Object(a.b)(["user","groups"]),{options:function(){var e=this;return[{text:"Gruppe auswählen",value:null,disabled:!0}].concat(this.groups.map(function(t){return{text:t.name,value:t.id,disabled:e.user.groups.map(function(e){return e.id}).includes(t.id)}}))}}),data:function(){return{selectedGroup:null,form:new i.a({}),changed:!1}},methods:{formChanged:function(e){this.changed=!0,this.form.errors.clear(e.target.name)},addUserGroup:function(){n.b.dispatch(o.c,{user_id:this.id,group_id:this.selectedGroup}),this.selectedGroup=null},removeUserGroup:function(e){n.b.dispatch(o.d,{user_id:this.id,group_id:e})},updateUser:function(){var e=this,t=this.form.data();t.user_id=this.id;var r=this.$store.dispatch(o.e,t);r.then(function(t){e.form.update(t)}),this.form.submit(r)}},mounted:function(){var e=this;n.b.dispatch(o.l,this.id),n.b.dispatch(o.b),n.b.subscribe(function(t){t.type===s.b&&(e.changed=!1,e.form.update(t.payload))})}},f=r(2),d=Object(f.a)(l,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mt-0 mt-sm-1 mt-md-2"},[r("can",{attrs:{I:"read-user",a:"User"}},[r("b-card",{attrs:{"bg-variant":"secondary","text-variant":"black"}},[r("div",{staticClass:"d-flex justify-content-between"},[r("h3",{staticClass:"m-0"},[e._v("Benutzer")])])]),e._v(" "),e.user?r("b-card",{staticClass:"mt-5"},[r("h4",[e._v("Allgemeine Informationen")]),e._v(" "),r("b-form",{on:{keydown:e.formChanged}},[r("b-form-group",{attrs:{id:"input-group-name",label:"Name:","label-for":"name"}},[r("b-form-input",{attrs:{id:"name",required:"",placeholder:"Namen eingeben"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{"force-show":e.form.errors.has("name")},domProps:{textContent:e._s(e.form.errors.get("name"))}})],1),e._v(" "),r("b-form-group",{attrs:{id:"input-group-bio",label:"Bio:","label-for":"bio"}},[r("b-form-input",{attrs:{id:"bio",required:"",placeholder:"Bio eingeben"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{"force-show":e.form.errors.has("description")},domProps:{textContent:e._s(e.form.errors.get("description"))}})],1),e._v(" "),r("b-form-group",{attrs:{id:"input-group-email",label:"Email:","label-for":"email"}},[r("b-form-input",{attrs:{id:"email",required:"",placeholder:"Email eingeben"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),r("b-form-invalid-feedback",{attrs:{"force-show":e.form.errors.has("email")},domProps:{textContent:e._s(e.form.errors.get("email"))}})],1),e._v(" "),r("b-alert",{staticClass:"mt-2 mb-4",attrs:{show:e.form.errors.has("common"),variant:"danger"},domProps:{textContent:e._s(e.form.errors.get("common"))}}),e._v(" "),r("div",{staticClass:"d-flex justify-content-end"},[r("b-button",{attrs:{disabled:!e.changed||e.form.errors.any(),type:"submit",variant:"primary"},on:{click:function(t){return t.preventDefault(),e.updateUser(t)}}},[e._v("Speichern")])],1)],1),e._v(" "),r("div",{staticClass:"mt-3"},[r("h4",[e._v("Gruppen")]),e._v(" "),e._l(e.user.groups,function(t){return r("b-card",{key:t.id,staticClass:"mt-2"},[r("b-row",[r("b-col",{attrs:{sm:"12",md:"8"}},[r("h4",[e._v(e._s(t.name))]),e._v(" "),r("p",[e._v(e._s(t.description))])]),e._v(" "),r("b-col",{staticClass:"d-flex justify-content-end align-items-end",attrs:{sm:"12",md:"4"}},[r("b-button",{attrs:{variant:"danger"},on:{click:function(r){return r.preventDefault(),e.removeUserGroup(t.id)}}},[e._v("Benutzer entfernen")])],1)],1)],1)}),e._v(" "),r("div",{staticClass:"mt-3"},[r("div",{attrs:{cols:"12"}},[e._v("\n                        Benutzer zu einer Gruppe hinzufügen:\n                    ")]),e._v(" "),r("b-row",{staticClass:"mt-1"},[r("b-col",{staticClass:"mt-1 mt-md-0",attrs:{cols:"12",md:"10"}},[e.groups?r("b-form-select",{attrs:{options:e.options},model:{value:e.selectedGroup,callback:function(t){e.selectedGroup=t},expression:"selectedGroup"}}):e._e()],1),e._v(" "),r("b-col",{staticClass:"mt-1 mt-md-0",attrs:{cols:"12",md:"2"}},[r("b-button",{attrs:{block:"",disabled:!e.selectedGroup},on:{click:function(t){return t.preventDefault(),e.addUserGroup(t)}}},[e._v("Hinzufügen")])],1)],1)],1)],2)],1):e._e()],1)],1)},[],!1,null,"707f5c67",null);t.default=d.exports}}]);