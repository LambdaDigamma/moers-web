(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{16:function(t,r,e){"use strict";function o(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var n=function(){function t(){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}}var r,e,n;return r=t,(e=[{key:"has",value:function(t){return this.errors.hasOwnProperty(t)}},{key:"any",value:function(){return Object.keys(this.errors).length>0}},{key:"get",value:function(t){if(this.errors[t])return this.errors[t][0]}},{key:"record",value:function(t){this.errors=t}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;t?delete this.errors[t]:this.errors={}}}])&&o(r.prototype,e),n&&o(r,n),t}();function i(t,r){for(var e=0;e<r.length;e++){var o=r[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}var s=function(){function t(r){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,t),this.update(r),this.shouldReset=!1}var r,e,o;return r=t,(e=[{key:"update",value:function(t){for(var r in this.originalData=t,t)this[r]=t[r];this.errors=new n}},{key:"data",value:function(){var t={};for(var r in this.originalData)t[r]=this[r];return t}},{key:"reset",value:function(){for(var t in this.originalData)this[t]="";this.errors.clear()}},{key:"submit",value:function(t){var r=this;t.then(function(t){r.onSuccess(t)}).catch(function(t){r.onFail(t)})}},{key:"onSuccess",value:function(t){this.shouldReset&&this.reset()}},{key:"onFail",value:function(t){this.errors.record(t)}}])&&i(r.prototype,e),o&&i(r,o),t}();r.a=s},72:function(t,r,e){"use strict";e.r(r);var o=e(5),n=e(7),i=e(16),s=e(0);function a(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);r&&(o=o.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),e.push.apply(e,o)}return e}function c(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var u={name:"CreatePoll",data:function(){return{form:new i.a({question:null,description:null,group_id:null,max_check:1,options:["",""]})}},computed:function(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?a(e,!0).forEach(function(r){c(t,r,e[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(e).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))})}return t}({},Object(o.b)(["isAuthenticated","currentUser"]),{canDelete:function(){return this.form.options.length>2},groupOptions:function(){if(void 0!==this.currentUser.groups)return this.currentUser.groups.filter(function(t){return n.a.can("create-poll","Poll")}).map(function(t){return{value:t.id,text:t.name}})},isSubmitEnabled:function(){if(null===this.form.question||""===this.form.question)return!1;if(null===this.form.description||""===this.form.description)return!1;if(null===this.form.group_id)return!1;if(this.form.max_check<1||this.form.max_check>=this.form.options.length)return!1;for(var t=0;t<this.form.options.length;t++)if(""===this.form.options[t])return!1;return!0}}),methods:{addPollOption:function(){this.form.options.push("")},deletePollOption:function(t){this.form.options.splice(t,1)},submit:function(){var t=this,r=this.form.data(),e=this.$store.dispatch(s.q,r);e.then(function(){t.$router.push({name:"polls"})}),e.catch(function(t){}),this.form.submit(e)}}},l=e(2),f=Object(l.a)(u,function(){var t=this,r=t.$createElement,e=t._self._c||r;return e("div",[e("can",{attrs:{I:"create-poll",a:"Poll"}},[e("b-card",{staticClass:"my-4",attrs:{"bg-variant":"secondary","text-variant":"black"}},[e("div",{staticClass:"d-flex justify-content-between"},[e("h3",{staticClass:"m-0"},[t._v("Abstimmung erstellen")])])]),t._v(" "),e("b-card",{staticClass:"mt-3"},[e("b-form",{on:{submit:function(r){return r.preventDefault(),t.submit()},keydown:function(r){return t.form.errors.clear(r.target.name)}}},[e("b-form-group",{attrs:{id:"question-group",label:"Frage:","label-for":"question"}},[e("b-form-input",{attrs:{id:"question",required:"",placeholder:"Gib die Frage der Abstimmung ein."},model:{value:t.form.question,callback:function(r){t.$set(t.form,"question",r)},expression:"form.question"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{"force-show":t.form.errors.has("question")},domProps:{textContent:t._s(t.form.errors.get("question"))}})],1),t._v(" "),e("b-form-group",{attrs:{id:"description-group",label:"Beschreibung:","label-for":"description"}},[e("b-form-textarea",{attrs:{id:"description",rows:"3",placeholder:"Füge eine Beschreibung für die Abstimmung hinzu."},model:{value:t.form.description,callback:function(r){t.$set(t.form,"description",r)},expression:"form.description"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{"force-show":t.form.errors.has("description")},domProps:{textContent:t._s(t.form.errors.get("description"))}})],1),t._v(" "),e("b-form-group",{attrs:{id:"group-group",label:"Gruppe für die Abstimmung:","label-for":"group"}},[e("b-form-select",{attrs:{id:"group",options:t.groupOptions},model:{value:t.form.group_id,callback:function(r){t.$set(t.form,"group_id",r)},expression:"form.group_id"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{"force-show":t.form.errors.has("group_id")},domProps:{textContent:t._s(t.form.errors.get("group_id"))}})],1),t._v(" "),e("b-form-group",{attrs:{id:"max_check-group",label:"Anzahl der auswählbaren Antworten:","label-for":"max_check"}},[e("b-form-input",{attrs:{id:"max_check",type:"number",min:"1",step:1},model:{value:t.form.max_check,callback:function(r){t.$set(t.form,"max_check",r)},expression:"form.max_check"}}),t._v(" "),e("b-form-invalid-feedback",{attrs:{"force-show":t.form.errors.has("max_check")},domProps:{textContent:t._s(t.form.errors.get("max_check"))}})],1),t._v(" "),e("b-form-group",{attrs:{label:"Antwortmöglichkeiten:"}},[t._l(t.form.options,function(r,o){return e("b-card",{key:o,staticClass:"mb-2",attrs:{"bg-variant":"secondary"}},[e("div",{staticClass:"d-flex"},[e("b-input",{attrs:{placeholder:"Titel der Antwortmöglichkeit eingeben."},model:{value:t.form.options[o],callback:function(r){t.$set(t.form.options,o,r)},expression:"form.options[index]"}}),t._v(" "),t.canDelete?e("b-button",{staticClass:"ml-3",attrs:{variant:"danger"},on:{click:function(r){return t.deletePollOption(o)}}},[t._v("Löschen")]):t._e()],1)])}),t._v(" "),e("b-form-invalid-feedback",{attrs:{"force-show":t.form.errors.has("options")},domProps:{textContent:t._s(t.form.errors.get("options"))}}),t._v(" "),e("div",{staticClass:"d-flex justify-content-end mt-4"},[e("b-button",{attrs:{variant:"primary"},on:{click:t.addPollOption}},[t._v("Weitere Antwortmöglichkeit hinzufügen")])],1)],2),t._v(" "),e("b-alert",{staticClass:"mt-2 mb-4",attrs:{show:t.form.errors.has("common"),variant:"danger"},domProps:{textContent:t._s(t.form.errors.get("common"))}}),t._v(" "),e("b-button",{attrs:{type:"submit",disabled:!t.isSubmitEnabled||t.form.errors.any(),block:"",variant:"success",size:"lg"}},[t._v("Abstimmung veröffentlichen")])],1)],1)],1)],1)},[],!1,null,"dd9dfa88",null);r.default=f.exports}}]);